# 多标签功能测试指南

## 功能概述

现在自选股票支持为每只股票添加多个标签，并提供了完整的标签管理功能：

### ✨ 新功能特性

1. **多标签支持**: 每只股票可以有多个标签
2. **快速添加**: 从系统中已有的标签快速选择添加
3. **手动输入**: 支持手动输入新标签（逗号分隔多个）
4. **精确删除**: 可以选择特定标签进行删除
5. **兼容性**: 自动处理旧格式数据迁移

### 🎮 操作流程

#### 1. 进入自选股票列表
- 在主菜单选择 "自选股票" 或按 `w` 键

#### 2. 管理标签（按 T 键）
- 选中股票后按 `T` 键进入标签管理界面
- 界面显示：
  - 当前股票信息
  - 当前已有标签（如果有的话）
  - 系统可用标签列表
  - 手动输入新标签选项

#### 3. 添加标签的三种方式

**方式一：选择现有标签**
- 用 `↑↓` 键选择系统中已有的标签
- 按 `Enter` 确认添加

**方式二：手动输入新标签**
- 选择 "手动输入新标签" 选项
- 按 `Enter` 进入输入界面
- 输入标签（支持逗号分隔多个）
- 按 `Enter` 确认

**方式三：批量输入**
- 在手动输入时，可以输入: `科技,AI,龙头` 
- 系统会自动分割为多个标签

#### 4. 删除标签（按 D 键）
- 在标签管理界面按 `D` 键
- 进入删除选择模式
- 用 `↑↓` 键选择要删除的标签
- 按 `Enter` 确认删除

#### 5. 分组查看（按 G 键）
- 在自选列表按 `G` 键
- 选择标签进行过滤
- 只显示包含该标签的股票

### 📋 标签显示规则

- **单个标签**: 直接显示标签名
- **多个标签**: 显示为 `标签1,标签2` 格式
- **标签过长**: 显示为 `第一个标签+2` 表示还有2个其他标签
- **无标签**: 显示为 `-`

### 🔄 数据兼容性

系统自动处理数据格式迁移：
- 旧格式: `"tag": "半导体"` → 新格式: `"tags": ["半导体"]`
- 保持向后兼容，现有数据无需手动处理

### 💡 使用技巧

1. **标签命名**: 建议使用简短、有意义的标签，如 "科技"、"医药"、"龙头"
2. **标签分组**: 相同主题的股票使用相同标签，便于分组查看
3. **标签层次**: 可以使用多个标签表示不同维度，如 ["科技", "AI", "龙头"]
4. **快速筛选**: 使用 G 键按标签快速筛选股票

### 🎯 测试步骤

1. 启动程序: `./cmd/stock-monitor`
2. 选择 "自选股票"
3. 选中任意股票，按 `T` 键
4. 尝试添加多个标签
5. 按 `D` 键测试删除功能
6. 按 `G` 键测试分组查看
7. 验证标签显示是否正确

### 🐛 注意事项

- 删除标签后如果股票没有其他标签，会自动添加默认标签 "-"
- 标签名称支持中文，建议长度不超过8个字符
- 系统会自动去重，不会添加重复标签